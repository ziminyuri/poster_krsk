{% extends "poster_app/user/base.html" %}
{% block content %}

<main role="main">

<div id="AddEventModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-body">

          <form role="form" action="{% url 'events' %}" method="POST">
              {% csrf_token %}
              <h1 class="h5 mb-3 font-weight-normal">Выберите тип мероприятия</h1>
              <input type="hidden" required class="form-control" name="_method" id="_method" value = "POST">

              <select id="RequestType" class="form-control" name="event_type" id="event_type">
                  {% for type in event_types %}
                      <option selected value= "{{ type.name }}">
                          {{ type.name }}
                      </option>
                  {% endfor %}
              </select>
                <br>
              <button class="btn btn-primary btn-block" type="submit">Добавить</button>

          </form>

      </div>
    </div>
  </div>
</div>

  <section class="jumbotron text-center">
    <div class="container">
        <h1>Мои мероприятия</h1>
    </div>
  </section>

    <button type="button" class="btn btn-outline-primary mb-2 ml-2 pl-4 pr-4" data-toggle="modal"
                      data-target="#AddEventModal">Добавить</button>


<div class="table-responsive">
        <table class="table table-striped table-sm ml-2">
            <thead>
            <tr>
                <th>Название</th>
                <th>Тип</th>
                <th>Дата</th>
                <th>Подробнее</th>
                <th>Редактировать</th>
                <th>Удалить</th>
            </tr>
            </thead>
            <tbody>
            {% for event in events %}
                <tr>
                    <td>{{ event.name }}</td>
                    <td>{{ event.ID_type_event.name }}</td>
                    <td>{{ event.data_time_begin }} - {{ event.data_time_end }}</td>
                    <td>Подробнее</td>
                    <td>
                        <form action="{% url 'events' %}" method="POST">
                            {% csrf_token %}
                                    <input type="hidden" required class="form-control" name="_method" value = "UPDATE">
                                    <input type="hidden" required class="form-control" name="event" value = "{{ event.ID_event}}">
                                    <input type="hidden" required class="form-control" name="event_type" value = "{{ event.ID_type_event.name}}">
                                    <input type="submit" class="btn btn-outline-danger btn-sm" value="Редактировать" >
                        </form>
                    </td>
                    <td>
                        <form action="{% url 'events' %}" method="POST">
                            {% csrf_token %}
                                    <input type="hidden" required class="form-control" name="_method" value = "DELETE">
                                    <input type="hidden" required class="form-control" name="event" value = "{{ event.ID_event}}">
                                    <input type="submit" class="btn btn-outline-danger btn-sm" value="Удалить" >
                        </form>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</main>
{% endblock %}